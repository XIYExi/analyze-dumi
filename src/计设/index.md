---

order: 1

---

# 需求规格说明书

## 科学依据

早期低代码设计可以追溯到第四代编程语言以及快速的应用程序开发工具，如UML设计器等，现如今随着模型驱动设计、自动代码生成和可视化开发思想被逐步认可，低代码的开发方向更多集中在工作流、以及专注于“加快面向客户的应用程序的开发”相关领域，随着时代和技术的发展，目前低代码开发主要集中在web和移动端应用开发领域。

在低代码领域，目前国外大约活跃着六十七家供应商，而且它的生态系统正在迅速成长。随着微软、甲骨文、IBM和SAP等企业都纷纷加入了这个市场，低代码开发市场开始飞速发展。在国内，随着阿里巴巴等大型互联网企业的入场，在原生低代码开发领域和云平台开发领域也取得了飞速发展。

低代码平台主要分为两种模式：一种是引擎模式，一种是生成源代码模式。目前国内的绝大多数低代码平台都属于前者。引擎模式的低代码设计平台一般通过整合开发脚手架，让开发者在开发环境中使用内置系统，通过可视化拖拽，表单配置等方式构建页面，通过定义简单的函数接口用于交互，最后使用webpack等打包工具，直接进行部署，这种形式一般被单页面、或者逻辑行为比较简单的网页所采用。而生成源代码模式即不采用打包部署的形式，让开发者更多得集中在页面的设计与布局上，至于用户行为逻辑以及交互则在导出代码后手动添加，这种模式可以完成复杂的逻辑交互，同时不依赖于框架，可以时刻进行调整和升级。


## 设计理念

Envelope Platform 低代码整合平台（下称Envelope）相较于传统的低代码平台具备的优势就是全面，Envelope并不是一个普通的低代码设计器，它类似于一个仓库、市场，在这里可以进行各种各样的低代码操作，如手机活动页面快速搭建，微信公众号模板搭建，响应式博客，流程图设计，表单设计等。

Envelope的理念是**低代码辅助简化开发流程**，我们聚焦的领域是软件工程领域中的**快速原型**生命周期模型。Envelope的优势是**快速搭建各种各样的效果图**，低代码构建是几乎所有低代码平台都需要提供的基础功能，但是相较于其他平台的嵌套，dom层级关系，Envelope提供的是标准的静态布局，着重聚焦于手机，以及大屏幕官网的构建，所以对响应式布局的能力并不突出。

但是得幸于移动端设备显示下对响应式需求不高，同时大屏幕首页官网采用模块布局，Envelope系统得以避免响应式处理的尴尬局面，但是面对不同用户的需求，我们决定集成Lowcode Engine进行响应式处理。

Envelope原生引擎负责移动端H5处理以及官网的模板构建，形如搭积木一样从上到下依次排列，你只需要通过鼠标拖拽元件、调整位置、录入数据，即可完成移动端H5页面的原型开发。

Lowcode Engine引擎（下称Lowcode）是我们第二个集成的低代码引擎，这是阿里开源的低代码方案，目前已拥有如宜搭这类成熟的方案。Lowcode是一套完整的低代码工具包，包括设计器、画布、标题栏，已经提供了一套完整配套组件，我们需要的做的就是在其基础上进行二次开发，编写低代码插件，并且提供物料，测试完成后集成到Envelope平台中。

AntV X6图引擎（下称AntV）是我们第三个决定集成的低代码引擎，聚焦于流程图、E-R关系图等图表的绘制，与Lowcode不同，AntV并没有配到的组件，提供的仅仅是一个渲染核心（绘制工具包）以及API接口，我们需要将其接入到Envelope核心依赖中，并为其提供状态管理、配套组件等。因此AntV的总体样式和Envelope相似，而Lowcode的风格和两个差距较大。

上述三种低代码引擎基本囊括了所有的可视化构建种类，后续我们将会使用Envelope原生引擎集成可视化表单构建，使用AntV图引擎完成在线的可视化编程等。

## 研究内容
系统将采用生成源代码模式，分别提供H5手机构建系统、Web交互网页构建系统等形式。采用React.js 和 Electron ，生成支持全平台使用的软件。通过React-DnD组件实现拖拽交互，通过Canvas实现画布展示，内置开源UI框架 Ant Design、 Semantic UIReact 以及自研UI框架。通过手动封装UI框架，提供模板和约束接口，参照JSON schema规范整合组件，通过表单修改JSON数据实现可视化修改。使用create-react-app脚手架以及Scss，构建自研UI框架，为可视化系统提供内置的集成UI。

通过集成lowcode-engine，集成开源引擎，并开发插件，实现栅格系统下的可视化开发。使用SpringCloud开发后端系统，将JSON schema数据保存在数据库中。通过FastApi规范构建接口。最后提供网页解析功能，通过解析网站URL，自动解析并生成JSONschema数据，一键生成低代码界面。

通过集成AntV X6图引擎，通过其提供的API接口，编写图形基类，编写各类监听回调函数，封装自定义的图形类，并且提供Envelope工具组件，以完成流程图、关系图等操作。

## 技术方案

- 使用Umi.js+ React 17.x + Typescript 构建低代码系统，封装UI系统并暴露接口，整合JSONschema数据供可视化构建使用。
- 使用React17.x + Scss 构建自研UI系统，UI系统依赖css样式文件，因此将会提供原生HTML和 React 两个版本。
- 开发环境中使用storybook展示组件，使用jest测试组件。生产环境中使用dumi展示组件。
- 整合开源引擎lowcode-engine，编写交互、定制等插件，实现栅格系统布局。
- 组件内状态管理采用dva，定义数据仓库用于统一修改JSONschema，当表单修改任何组件的数据时将会上报仓库，并由画布中展示的组件订阅，当数据被修改后，将会通过dva统一调度并执行重渲染。
- 系统完全采用组件式编程开发，通过hook统一管理参数，组件通过memo包裹，防止过度渲染。
- 采用css-in-js策略编写UI框架，除如React-DnD等不支持自定义包裹组件的包外，其余组件均符合css-in-js规范。
- 使用dumi框架开发wiki文档、api接口文档、UI系统展示文档。
- 使用SpringCloud编写后端，接口采用FastApi规范，数据库采用Mysql，缓存数据库采用redis。部署采用docker。


## 预期成果

实现低代码平台，整合多种构建形式，可以导出源代码并正常运行。构建后端可以在生产环境下正常运行，可以完成用户身份的校验、鉴权等操作，可以实现对模板JSON数据的增删改查。实现展示官网、文档系统和UI展示网站。可以通过解析网站URL并生成JSON schema数据。

使用Markdown编写详细的设计文档和使用手册，在ApiFox中编写SpringCloud接口，并进行自动化连接测试，使用Swagger生成Api测试文档。使用dumi集成文档。

可以解析URL，自动解析目标网站的HTML和样式结构，生成对应的JSON schema数据，可以通过内置的系统打开并进行编辑。



